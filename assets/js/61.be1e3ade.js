(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{383:function(a,t,e){"use strict";e.r(t);var r=e(42),s=Object(r.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"d2crudplus-crud"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#d2crudplus-crud"}},[a._v("#")]),a._v(" d2CrudPlus.crud")]),a._v(" "),e("h2",{attrs:{id:"如何工作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何工作"}},[a._v("#")]),a._v(" 如何工作")]),a._v(" "),e("p",[a._v("d2CrudPlus是通过 crud页面的混入功能开始工作的"),e("br"),a._v("\n混入之后，该crud页面将继承d2CrudPlus.curd的方法")]),a._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n...\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),e("span",{pre:!0,attrs:{class:"token script"}},[e("span",{pre:!0,attrs:{class:"token language-javascript"}},[a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" d2CrudPlus "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'d2-crud-plus'")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("export")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  mixins"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("d2CrudPlus"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("crud"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 最核心部分，继承d2CrudPlus.crud")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),e("h2",{attrs:{id:"接口方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#接口方法"}},[a._v("#")]),a._v(" 接口方法")]),a._v(" "),e("p",[a._v("你可以查看"),e("a",{attrs:{href:"https://gitee.com/greper/d2-crud-plus/blob/master/packages/d2-crud-plus/src/lib/mixins/crud.js",target:"_blank",rel:"noopener noreferrer"}},[a._v("d2CrudPlus.crud源码"),e("OutboundLink")],1),a._v("\n，然后根据需求调用或覆盖其中的方法来自定义"),e("br"),a._v("\n以下列出一些已有的方法，可能更新不及时")]),a._v(" "),e("h3",{attrs:{id:"geteditform"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#geteditform"}},[a._v("#")]),a._v(" getEditForm()")]),a._v(" "),e("p",[a._v("获取添加和修改表单的formData")]),a._v(" "),e("h3",{attrs:{id:"initcolumns"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#initcolumns"}},[a._v("#")]),a._v(" initColumns()")]),a._v(" "),e("p",[a._v("crudOptions的初始化方法，会在create方法中被调用"),e("br"),a._v("\n此方法调用后将生成d2-crud所需要的全部配置")]),a._v(" "),e("h3",{attrs:{id:"computecrudheight"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#computecrudheight"}},[a._v("#")]),a._v(" computeCrudHeight()")]),a._v(" "),e("p",[a._v("计算表格的最大高度，在mounted中给表格设置maxHeight，使翻页组件能保持在窗口可见的最底部")]),a._v(" "),e("h3",{attrs:{id:"handlepaginationchange-event"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handlepaginationchange-event"}},[a._v("#")]),a._v(" handlePaginationChange(event)")]),a._v(" "),e("p",[a._v("翻页组件change事件触发方法")]),a._v(" "),e("h3",{attrs:{id:"handlesearch-searchformdata"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handlesearch-searchformdata"}},[a._v("#")]),a._v(" handleSearch(searchFormData)")]),a._v(" "),e("p",[a._v("查询按钮点击事件触发方法")]),a._v(" "),e("h3",{attrs:{id:"dorefresh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dorefresh"}},[a._v("#")]),a._v(" doRefresh()")]),a._v(" "),e("p",[a._v("表格刷新数据")]),a._v(" "),e("h3",{attrs:{id:"doload"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#doload"}},[a._v("#")]),a._v(" doLoad()")]),a._v(" "),e("p",[a._v("页面打开后触发，第一次拉取数据")]),a._v(" "),e("h3",{attrs:{id:"handledialogopen-mode-row"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handledialogopen-mode-row"}},[a._v("#")]),a._v(" handleDialogOpen ({ mode, row })")]),a._v(" "),e("p",[a._v("【空方法，可直接覆盖】对话框被打开前调用，用于在打开对话前修改传入表单的数据")]),a._v(" "),e("h3",{attrs:{id:"addrow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#addrow"}},[a._v("#")]),a._v(" addRow()")]),a._v(" "),e("p",[a._v("此方法将触发打开添加对话框")]),a._v(" "),e("h3",{attrs:{id:"handlerowadd-row-done"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handlerowadd-row-done"}},[a._v("#")]),a._v(" handleRowAdd(row, done)")]),a._v(" "),e("p",[a._v("添加对话框点击提交的处理")]),a._v(" "),e("h3",{attrs:{id:"handlerowedit-row-done"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handlerowedit-row-done"}},[a._v("#")]),a._v(" handleRowEdit(row, done)")]),a._v(" "),e("p",[a._v("编辑对话框点击提交的处理")]),a._v(" "),e("h3",{attrs:{id:"editbefore-row"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#editbefore-row"}},[a._v("#")]),a._v(" editBefore(row)")]),a._v(" "),e("p",[a._v("编辑对话框提交到后端前对表单数据进行处理"),e("br"),a._v("\n默认会调用"),e("code",[a._v("this.doValueResolve(row)")]),a._v("，内部会遍历column配置的"),e("code",[a._v("valueResolve(row,key)")]),e("br"),a._v("\n如要覆盖此方法，不要忘记调用"),e("code",[a._v("this.doValueResolve(row)")])]),a._v(" "),e("h3",{attrs:{id:"addbefore-row"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#addbefore-row"}},[a._v("#")]),a._v(" addBefore(row)")]),a._v(" "),e("p",[a._v("添加对话框提交到后端前对表单数据进行处理"),e("br"),a._v("\n默认会调用"),e("code",[a._v("this.doValueResolve(row)")]),a._v(" ，内部会遍历column配置的"),e("code",[a._v("valueResolve(row,key)")]),e("br"),a._v("\n如要覆盖此方法，不要忘记调用"),e("code",[a._v("this.doValueResolve(row)")])]),a._v(" "),e("h3",{attrs:{id:"handledialogcancel-done"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handledialogcancel-done"}},[a._v("#")]),a._v(" handleDialogCancel(done)")]),a._v(" "),e("p",[a._v("编辑对话框取消的处理")]),a._v(" "),e("h3",{attrs:{id:"handleselectionchange-selection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handleselectionchange-selection"}},[a._v("#")]),a._v(" handleSelectionChange (selection)")]),a._v(" "),e("p",[a._v("【空方法，可直接覆盖】多选事件")]),a._v(" "),e("h3",{attrs:{id:"handlecurrentchange-currentrow-oldcurrentrow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handlecurrentchange-currentrow-oldcurrentrow"}},[a._v("#")]),a._v(" handleCurrentChange(currentRow, oldCurrentRow)")]),a._v(" "),e("p",[a._v("【空方法，可直接覆盖】单选事件")]),a._v(" "),e("h3",{attrs:{id:"handlerowremove-index-row-done"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handlerowremove-index-row-done"}},[a._v("#")]),a._v(" handleRowRemove ({ index, row }, done)")]),a._v(" "),e("p",[a._v("删除按钮提交时的处理方法")]),a._v(" "),e("h3",{attrs:{id:"addrequest-row"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#addrequest-row"}},[a._v("#")]),a._v(" addRequest (row)")]),a._v(" "),e("p",[a._v("添加记录的http请求方法，返回Promise，请参考示例自行实现该方法")]),a._v(" "),e("h3",{attrs:{id:"editrequest-row"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#editrequest-row"}},[a._v("#")]),a._v(" editRequest (row)")]),a._v(" "),e("p",[a._v("修改记录的http请求方法，返回Promise，请参考示例自行实现该方法")]),a._v(" "),e("h3",{attrs:{id:"delrequest-row"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#delrequest-row"}},[a._v("#")]),a._v(" delRequest (row)")]),a._v(" "),e("p",[a._v("删除记录的http请求方法，返回Promise，请参考示例自行实现该方法")]),a._v(" "),e("h3",{attrs:{id:"pagerequest-page"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pagerequest-page"}},[a._v("#")]),a._v(" pageRequest (page)")]),a._v(" "),e("p",[a._v("查询页面数据的http请求方法，返回Promise，请参考示例自行实现该方法")]),a._v(" "),e("h3",{attrs:{id:"addafter-row"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#addafter-row"}},[a._v("#")]),a._v(" addAfter(row)")]),a._v(" "),e("p",[a._v("添加http请求成功后触发，默认会调用"),e("code",[a._v("this.doAfterRowChange(row)")]),a._v("刷新表格数据")]),a._v(" "),e("h3",{attrs:{id:"editafter-row"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#editafter-row"}},[a._v("#")]),a._v(" editAfter(row)")]),a._v(" "),e("p",[a._v("修改http请求成功后触发，默认会调用"),e("code",[a._v("this.doAfterRowChange(row)")]),a._v("刷新表格数据")]),a._v(" "),e("h3",{attrs:{id:"delafter-row"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#delafter-row"}},[a._v("#")]),a._v(" delAfter(row)")]),a._v(" "),e("p",[a._v("删除http请求成功后触发，默认会调用"),e("code",[a._v("this.doAfterRowChange(row)")]),a._v("刷新表格数据")]),a._v(" "),e("h3",{attrs:{id:"doafterrowchange-row"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#doafterrowchange-row"}},[a._v("#")]),a._v(" doAfterRowChange(row)")]),a._v(" "),e("p",[a._v("表格行数据变动后触发，默认会调用"),e("code",[a._v("this.doRefresh()")]),a._v("刷新表格数据")]),a._v(" "),e("h3",{attrs:{id:"handleformdatachange-key-value"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#handleformdatachange-key-value"}},[a._v("#")]),a._v(" handleFormDataChange({ key, value })")]),a._v(" "),e("p",[a._v("编辑框表单改变事件"),e("br"),a._v("\n默认会执行相应的"),e("code",[a._v("column.form.valueChange")]),e("br"),a._v("\n然后调用"),e("code",[a._v("this.doFormDataChange({ key, value })")])]),a._v(" "),e("h3",{attrs:{id:"doformdatachange-key-value"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#doformdatachange-key-value"}},[a._v("#")]),a._v(" doFormDataChange ({ key, value })")]),a._v(" "),e("p",[a._v("【空方法，可直接覆盖】用户自定义的表单改变事件处理")])])}),[],!1,null,null,null);t.default=s.exports}}]);